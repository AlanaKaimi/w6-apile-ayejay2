{% extends "base.html" %}

{% block content %}

<h3>{{ post.title }}</h3>

    <p>posted by: {{ post.posted_by }}
            <form action="{% url 'post_remove' slug=post.slug %}" method="POST">
                {% if request.user.is_authenticated %}
                {% csrf_token %}
                    {% if request.user == post.posted_by %}
                    <button type="submit" class="btn btn-danger">
                        <stong>Delete Post</stong>
                    </button>
                    {% endif %}
                {% endif %}
            </form>
        <br> 
        on {{ post.posted_on }}<br>
   </p>
    <p>{{ post.description }}</p>
    <div class="post-item">
            <ul class="votes">
                <li class="vote-item num-votes">
                    {{post.votes.count}} votes
                </li>
                <form action="{% url 'vote_posts' slug=post.slug %}" method="POST">
                    {% if request.user.is_authenticated %}
                    {% csrf_token %}
                    {% if post in request.user.vote_posts.all %}
                    <li class="vote-item">
                        <button type="submit" class="btn notart">
                            <span class="fa-stack fa-1x">
                                <i class="fa fa-ban fa-stack-1x"></i>
                                <i class="fa fa-paint-brush fa-stack-0.5x fa-inverse"></i>
                            </span>
                        </button>
                    </li>
                    {% else %}
                    <li class="vote-item">
                        <button type="submit" class="btn art">
                            <i class="fa fa-paint-brush fa-inverse fa-2x"></i>
                        </button>
                    </li>
                    {% endif %}
                    {% endif %}
                </form>
            </ul>
        </div>
    {% if post.image_url %}
    <img src="{{ post.image_url }}"><br>
    {% endif %}

    {% if request.user.is_authenticated %}
    <h4><a href="{% url 'create_comment' slug=post.slug %}">Add Comment</h4></a>   
    {% endif %}

    {% if post.comments.count %}
        <h4>Comments: </h4>
        {% for comment in post.comments.all %}
        
        <p><strong>{{ comment.posted_by }}:</strong> {{ comment.text }}<br>
        {{ comment.created_at }}</p>
    {% endfor %}

    {% endif %}

{% endblock %}
